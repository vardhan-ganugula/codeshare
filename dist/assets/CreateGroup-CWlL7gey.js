import{G as m,R as u,r as c,B as l,j as e,F as S,d as k,T}from"./index-CVcYMcyB.js";import{I as D,a as G}from"./index-YF8dFqXW.js";import{a as b}from"./axiosProfile-CMomThzU.js";function F(s){return m({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m15 16-4 4h10v-4zM12.06 7.19 3 16.25V20h3.75l9.06-9.06-3.75-3.75zM5.92 18H5v-.92l7.06-7.06.92.92L5.92 18zM18.71 8.04a.996.996 0 0 0 0-1.41l-2.34-2.34a1.001 1.001 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(s)}function M(s){return m({tag:"svg",attr:{version:"1.1",id:"search",x:"0px",y:"0px",viewBox:"0 0 24 24",style:"enable-background:new 0 0 24 24;"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:`M20.031,20.79c0.46,0.46,1.17-0.25,0.71-0.7l-3.75-3.76c1.27-1.41,2.04-3.27,2.04-5.31
		c0-4.39-3.57-7.96-7.96-7.96s-7.96,3.57-7.96,7.96c0,4.39,3.57,7.96,7.96,7.96c1.98,0,3.81-0.73,5.21-1.94L20.031,20.79z
		 M4.11,11.02c0-3.84,3.13-6.96,6.96-6.96c3.84,0,6.96,3.12,6.96,6.96c0,3.84-3.12,6.96-6.96,6.96C7.24,17.98,4.11,14.86,4.11,11.02
		z`},child:[]}]}]})(s)}function R(s){return m({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 7H5v13a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7H6zm4 12H8v-9h2v9zm6 0h-2v-9h2v9zm.618-15L15 2H9L7.382 4H3v2h18V4z"},child:[]}]})(s)}function H(s){return m({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 1024c-69.1 0-136.2-13.5-199.3-40.2C251.7 958 197 921 150 874c-47-47-84-101.7-109.8-162.7C13.5 648.2 0 581.1 0 512c0-19.9 16.1-36 36-36s36 16.1 36 36c0 59.4 11.6 117 34.6 171.3 22.2 52.4 53.9 99.5 94.3 139.9 40.4 40.4 87.5 72.2 139.9 94.3C395 940.4 452.6 952 512 952c59.4 0 117-11.6 171.3-34.6 52.4-22.2 99.5-53.9 139.9-94.3 40.4-40.4 72.2-87.5 94.3-139.9C940.4 629 952 571.4 952 512c0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.2C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3s-13.5 136.2-40.2 199.3C958 772.3 921 827 874 874c-47 47-101.8 83.9-162.7 109.7-63.1 26.8-130.2 40.3-199.3 40.3z"},child:[]}]})(s)}const L=()=>{const[s,n]=u.useState({groupName:"",groupCode:"",groupDescription:""}),[o,d]=u.useState([]),[p,x]=u.useState([]),[h,i]=u.useState(!1),y=c.useCallback((t,a)=>{let r;return function(...g){clearTimeout(r),r=setTimeout(()=>t(...g),a)}},[]),v=c.useCallback(async t=>{if(!t.trim()){x([]);return}i(!0);try{const a=await b.get(`/search?value=${t}`);a.data.data.length===0&&l.warning("No results found"),x(a.data.data)}catch(a){console.log(a),l.error("An error occurred. Please try again later")}finally{i(!1)}},[]),f=c.useCallback(t=>{n(a=>({...a,[t.target.name]:t.target.value}))},[n]),C=c.useCallback(async t=>{if(t.preventDefault(),!s.groupName||!s.groupCode){l.error("Group name and code are required");return}if(o.length===0){l.error("Please select at least one text code");return}i(!0);try{const a=await b.post("/create-group",{name:s.groupName,groupCode:s.groupCode,description:s.groupDescription,textCodes:o.map(r=>parseInt(r))});if(a.data.status!=="success"){l.error(a.data.message);return}}catch(a){console.log(a),l.error("An error occurred. Please try again later")}finally{i(!1)}l.success("Group created successfully!")},[s,o]),j=c.useCallback(y(v,500),[]),N=c.useCallback(t=>{if(o.includes(t)){l.warning("This text code is already selected");return}d(a=>[...a,t]),l.success("Text code added successfully")},[o,d]),w=c.useCallback(t=>{d(a=>a.filter(r=>r!==t)),l.success("Text code removed successfully")},[d]),z=c.useCallback(t=>{const a=t.target.value;if(a.match(/^[0-9]*$/)){let r=s.groupCode+a;r.length>5&&(r=r.substring(r.length-5,r.length)),n(g=>({...g,groupCode:r}))}},[n,s.groupCode]);return e.jsx("main",{className:"w-full min-h-[90vh] bg-gray-50 p-5",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("section",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsx(S,{className:"text-blue-500 text-3xl"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Create New Group"})]}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"groupName",className:"text-sm font-medium text-gray-700 block",children:"Group Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute top-1/2 left-3 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",id:"groupName",name:"groupName",value:s.groupName,onChange:f,placeholder:"Enter group name",className:"pl-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"groupCode",className:"text-sm font-medium text-gray-700 block",children:"Group Code"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute top-1/2 left-3 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",id:"groupCode",name:"groupCode",value:s.groupCode,onChange:z,placeholder:"Enter group code",className:"pl-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"groupDescription",className:"text-sm font-medium text-gray-700 block",children:"Group Description"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute top-3 left-3 text-gray-400",size:13}),e.jsx("textarea",{id:"groupDescription",name:"groupDescription",value:s.groupDescription,onChange:f,placeholder:"Enter group description",rows:4,className:"pl-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"textCode",className:"text-sm font-medium text-gray-700 block",children:"Search Text Codes"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute top-1/2 left-3 transform -translate-y-1/2 text-gray-400",size:22}),e.jsx("input",{type:"search",id:"textCode",placeholder:"Search for text codes...",onChange:t=>j(t.target.value),className:"pl-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),o.length>0&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Selected Text Codes"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(t=>e.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-1 rounded-full border shadow-sm",children:[e.jsx("span",{className:"text-sm text-gray-700",children:t}),e.jsx("button",{type:"button",onClick:()=>w(t),className:"text-red-500 hover:text-red-700 transition-colors",children:e.jsx(R,{size:14})})]},t))})]}),e.jsxs("button",{type:"submit",className:"w-auto bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-md transition-colors duration-200 flex items-center justify-center gap-2",disabled:h,children:[h?e.jsx("div",{className:"animate-spin text-light",children:e.jsx(H,{size:20})}):e.jsx(e.Fragment,{children:e.jsx(G,{size:20})}),"Create Group"]})]})]}),p&&p.length>0&&e.jsx(T,{name:"Search Results",results:p,textCodes:o,enableAddText:!0,handleAddTextCode:N})]})})};export{L as default};
