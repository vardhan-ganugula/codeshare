import{r as n,c as p,u as w,j as e,B as r}from"./index-CEF8r1q3.js";import{a as u}from"./axiosProfile-ClHwDfqI.js";import{s as o}from"./socket-DnEfjo1g.js";function v(){const[l,i]=n.useState("write you text here"),{code:s}=p(),x=w(),[d,m]=n.useState(!1),f=a=>{m(a.target.checked)};async function h(a){try{const t=await u.get("/view-text",{params:{code:a}});t.data.status==="success"?i(t.data.data.textInfo):(r.error(t.data.msg),r.info("redirecting in 2seconds"),setTimeout(()=>{x("/")},2e3))}catch{r.error("something went wrong")}}n.useEffect(()=>{h(s)},[s]),n.useEffect(()=>(o.connect(),o.emit("join_room",{code:s}),()=>{o.off("join_room"),o.disconnect()}),[]);const c=()=>{o.emit("send_message",{code:s,message:l})},g=async a=>{if(a.preventDefault(),c(),s.length!=4){r.error("code must atleat 4 digit");return}try{const t=await u.post("/update-text",{textInfo:l,textCode:s});t.data.status=="success"?r.success(t.data.msg):r.error(t.data.msg)}catch(t){console.error(t)}};return d&&c(),e.jsx(e.Fragment,{children:e.jsxs("main",{className:"md:h-[87vh] h-auto w-full p-2 flex flex-col gap-2 md:flex-row",children:[e.jsx("aside",{className:"md:w-[350px] w-full p-2 md:h-full border-r-2 border-gray-100 ",children:e.jsxs("form",{className:"w-full shadow rounded",onSubmit:g,children:[e.jsx("h1",{className:"bg-indigo-500 py-2 text-center rounded text-white",children:"Update Text"}),e.jsxs("div",{className:"w-full p-3 flex gap-2",children:[e.jsx("input",{type:"text",className:"h-10 flex-shrink-0 w-2/3 p-2 rounded border-indigo-300 focus:border-indigo-500 outline-none border-2 text-center",value:s,disabled:!0}),e.jsx("button",{type:"submit",className:"text-white rounded bg-indigo-500 w-full py-2 flex-grow-0",children:"update"})]}),e.jsxs("div",{className:"w-full p-3 flex gap-2 items-center",children:[e.jsx("div",{children:"Sync Text :"}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",name:"updateMessage",id:"updateMessage",hidden:!0,onChange:f}),e.jsx("label",{htmlFor:"updateMessage",className:`w-[60px] h-7 rounded-full bg-white inline-block relative p-1 cursor-pointer border-2 ${d?"border-indigo-400":"border-gray-400"} `,children:e.jsx("span",{className:`inline-block absolute w-5 h-5 rounded-full top-1/2 -translate-y-1/2 transition-all duration-300 ease-in-out ${d?"translate-x-7 bg-indigo-400":"translate-x-0 bg-gray-300"}`})})]})]})]})}),e.jsx("section",{className:"w-full flex-grow md:h-full sm:min-h-[50vh]",children:e.jsx("textarea",{className:"w-full h-full outline-none p-3",value:l,onChange:a=>i(a.target.value)})})]})})}export{v as default};
